<!doctype html>
<html lang="en">
    <head>
        {{> partials/header}}
    </head>
    <body>
        <div class="spinnerDiv d-none">
            <div class="spinnerLoading"></div>
        </div>

        {{#Lead}}
        <input type="hidden" value="{{id}}" name="leadID" id="leadID" />
        <input type="hidden" value="{{segmentoPOID}}" name="segmentoPOID" id="segmentoPOID" />
        <input type="hidden" value="{{unidadeEmitentePOID}}" name="unidadeEmitentePOID" id="unidadeEmitentePOID" />
        <input type="hidden" value="{{clientePOID}}" name="clientePOID" id="clientePOID" />
        <div class="leadError d-none p-3 mb-2 bg-danger text-white"></div>

        {{> partials/fixed-top}}

        <div class="container-fluid">
            <div class="row">
                <div class="col-12 my-2">
                    <ul class="list-group list-group-horizontal-xl">
                        <li class="list-group-item col">
                            <p class="p-0 m-0 font-weight-bolder"><i class="far fa-calendar-alt"></i> Data Criado</p>
                            <p class="m-0 p-0">{{dataEmissaoFormatado}}, {{dataEmissaoDias}} dia(s)</p>
                        </li>
                        <li class="list-group-item col">
                            <p class="p-0 m-0 font-weight-bolder"><i class="fas fa-user-tie"></i> Vendedor / Emissor </p>
                            <p class="p-0 m-0">{{Cliente.Gerente.UsuarioNomeCurto}} / {{Vendedor.UsuarioNomeCurto}}</p>
                        </li>
                       <!-- <li class="list-group-item col">
                            <p class="p-0 m-0 font-weight-bolder"><i class="far fa-money-bill-alt"></i> Financeiro:</p>
                            {{#Financeiro}}
                            <p class="p-0 m-0">
                                <span title="limite total" class="font-weight-bold">{{limite}}</span> /
                                <span title="limite disponível" class="font-weight-bold">{{disponivel}}</span> /
                                {{#atrasados}}<span title="atrasados" class="text-danger font-weight-bold">{{atrasados}}</span>{{/atrasados}}
                                {{^atrasados}}<span title="atrasados" class="text-success font-weight-bold">0</span>{{/atrasados}}
                            </p>
                            {{/Financeiro}}
                        </li>
                        <li class="list-group-item col">
                            <p class="p-0 m-0 font-weight-bolder"><i class="fas fa-users-cog"></i> Cadastro:</p>
                            {{#Cliente}}
                            <p class="p-0 m-0">
                                <strong>Descontos -></strong> {{clienteDesconto}}, {{clienteDescontoMakAutomotive}}, {{clienteDescontoPedido}} |
                                <strong>Juros:</strong> {{clienteJuros}}, <strong>Sobretaxa:</strong> {{clienteSobretaxa}},
                            </p>
                            {{/Cliente}}
                        </li>

                        0 - desconhecido
                        01 - B2B
                        02 - B2C
                        03 - ML
                        04 - B2W
                        05 - Shopee
                        06 - Magalu
                        07 - Viavarejo
                        08 - Amazon
                        09 - instagram
                        10 - facebook
                        11 - youtube
                        12 - visita
                        13 - campanha
                        14 - promoção
                        15 - email marketing

                        //-->
                        <li class="list-group-item col-1">
                            <p class="p-0 m-0"><i class="fab fa-font-awesome-flag"></i> Fonte: <i class="fas text-danger fa-question-circle" data-toggle="tooltip" data-placement="left" title="Origem do pedido:  0 - desconhecido, 1 - B2B, 2 - B2C, 3 - Mercado Livre, 4 - B2W, 5 - Shopee, 6 - Magalu, 7 - Viavarejo, 8 - Amazon, 9 - Instagram, 10 - Facebook, 11 - Youtube, 12 - Visita, 13 - Campanha, 14 - Promoção, 15 - Email marketing"></i></p>
                            <input class="form-control form-control-sm update" data-url="/leads/leads5/lead/update/Leads/{{id}}" name="leadFonte" id="leadFonte" value="{{leadFonte}}" style="width:80px">
                        </li>
                        <li class="list-group-item col-1">
                            <p class="p-0 m-0"><i class="fas fa-font"></i> Tipo: <i class="fas text-danger fa-question-circle" data-toggle="tooltip" data-placement="left" title="1 - Ativa, 2 - Receptivo"></i></p>
                            <input class="form-control form-control-sm update" data-url="/leads/leads5/lead/update/Leads/{{id}}" name="leadTipo" id="leadTipo" value="{{leadTipo}}" style="width:80px">
                        </li>
                        
                        <!-- Verificação de Máquinas  //-->
                        {{#machines}}
                        <li class="list-group-item col">
                            <p class="p-0 m-0"><i class="fas fa-building"></i> Emitente: <i class="fas text-danger fa-question-circle" data-poload="{{CONTAINER}}helper/unity/?clienteID={{clientePOID}}"></i></p>
                            <select class="form-control select2-ajax" data-field="unidadeEmitentePOID" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/emit/">
                                {{#Emitente}}<option value="{{emitenteFantasia}}" selected="selected">{{emitenteFantasia}}</option>{{/Emitente}}
                            </select>
                        </li>
                        {{/machines}}
                        {{^machines}}
                        <li class="list-group-item col">
                            <p class="p-0 m-0"><i class="fas fa-building"></i> Emitente: <i class="fas text-danger fa-question-circle" data-poload="{{CONTAINER}}helper/unity/?clienteID={{clientePOID}}"></i></p>
                            <select class="form-control select2-ajax" data-recalculate="true" data-recalculate-price="true" data-field="unidadeEmitentePOID" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/emit/">
                                {{#Emitente}}<option value="{{emitenteFantasia}}" selected="selected">{{emitenteFantasia}}</option>{{/Emitente}}
                            </select>
                        </li>
                        {{/machines}}
                        
                        {{#bearings}}
                        <li class="list-group-item col">
                            <p class="p-0 m-0"><i class="fas fa-business-time"></i> Prazo: <i class="fas text-danger fa-question-circle" data-poload="{{CONTAINER}}helper/terms/?clienteID={{clientePOID}}"></i></p>
                            <select class="form-control input-sm select2-ajax" data-recalculate="false" data-field="prazoPagamentoVezes" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/prazo/">
                                {{#Prazo}}<option value="{{PrazoTermos}}" selected="selected">{{PrazoTermos}}</option>{{/Prazo}}
                            </select>
                        </li>
                        {{/bearings}}
                        {{#machines}}
                        <li class="list-group-item col"> 
                            <p class="p-0 m-0"><i class="fas fa-people-arrows"></i> Faturar para: </p>
                            <select class="form-control input-sm select2-ajax" data-field="clienteDoClientePOID" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/auto/cc_{{clientePOID}}/">
                                {{#ClienteDoCliente}}<option value="{{clienteNome}}" selected="selected">{{clienteNome}}</option>{{/ClienteDoCliente}}
                                {{^ClienteDoCliente}}<option value="{{Cliente.clienteNome}}" data-recalculate="true" selected="selected">{{Cliente.clienteNome}}</option>{{/ClienteDoCliente}}
                            </select>
                        </li>
                        {{/machines}}

                        {{#SESSION.acessoGerencial}}
                        <li class="list-group-item col">
                            <p class="p-0 m-0"><i class="fas fa-sitemap"></i> Operação <small class="text-muted">(NOP)</small>:</p>
                            <select class="form-control select2-ajax" data-recalculate="true" data-field="naturezaOperacaoPOID" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/nop/">
                                {{#Natureza}}<option value="{{naturezaOperacao}}" selected="selected">{{naturezaOperacao}}</option>{{/Natureza}}
                            </select>
                        </li>
                        <li class="list-group-item col-1">
                            <p class="p-0 m-0">Autorizado: <i class="fas text-danger fa-question-circle" data-toggle="tooltip" data-placement="left" title="Se o Lead for autorizado pela gerência não haverá checagem de 'Lead Vencido' na hora de emissão do pedido. Para Autorizar o Lead coloque 1."></i></p>
                            <input class="form-control form-control-sm update" data-url="/leads/leads5/lead/update/Leads/{{id}}" name="leadAutorizado" id="leadAutorizado" value="{{leadAutorizado}}" style="width:80px">
                        </li>
                        {{/SESSION.acessoGerencial}}
                        {{^SESSION.acessoGerencial}}
                          {{#machines}}
                            <li class="list-group-item col">
                                <p class="p-0 m-0"><i class="fas fa-sitemap"></i> Operação <small class="text-muted">(NOP)</small>:</p>
                                <select class="form-control select2-ajax" data-recalculate="true" data-field="naturezaOperacaoPOID" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/nop/">
                                    {{#Natureza}}<option value="{{naturezaOperacao}}" selected="selected">{{naturezaOperacao}}</option>{{/Natureza}}
                                </select>
                            </li>
                          {{/machines}}
                          {{#parts}}
                          <li class="list-group-item col">
                                <p class="p-0 m-0"><i class="fas fa-sitemap"></i> Operação <small class="text-muted">(NOP)</small>:</p>
                                <select class="form-control select2-ajax" data-recalculate="true" data-field="naturezaOperacaoPOID" data-lead="{{id}}" data-ajax-update="{{CONTAINER}}service/update/" data-ajax--url="{{CONTAINER}}service/nop/">
                                    {{#Natureza}}<option value="{{naturezaOperacao}}" selected="selected">{{naturezaOperacao}}</option>{{/Natureza}}
                                </select>
                            </li>
                          {{/parts}}
                        {{/SESSION.acessoGerencial}}
                    </ul>
                </div>
                <div class="col-12">
                    <div class="leadSearch bg-custom p-2">
                        <div class="row">
                            <div class="col">
                                <div>
                                    <label>Filtrar:</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchStock" type="radio" name="searchStock" id="searchStock" value="total">
                                    <label class="form-check-label" for="searchStock">com Estoque</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchStock" type="radio" name="searchStock" id="searchStock100" value="sem">
                                    <label class="form-check-label" for="searchStock100">sem Estoque</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchStock" type="radio" name="searchStock" id="searchStock1" value="1">
                                    <label class="form-check-label" for="searchStock1">por SP-Matriz</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchStock" type="radio" name="searchStock" id="searchStock8" value="8">
                                    <label class="form-check-label" for="searchStock8">por SP-BF</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchStock" type="radio" name="searchStock" id="searchStock6" value="6">
                                    <label class="form-check-label" for="searchStock6">por SC</label>
                                </div>

                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchStock" type="radio" name="searchStock" id="searchStockNext" value="previsao">
                                    <label class="form-check-label" for="searchStockNext">com Previsão</label>
                                </div>
                            </div>
                            <div class="col">
                                <div>
                                    <label>Ordernar</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchOrder" type="radio" name="searchOrder" id="searchOrder" value="estoqueTotal desc" checked>
                                    <label class="form-check-label" for="searchOrder">Estoque</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input searchOrder" type="radio" name="searchOrder" id="searchOrder1" value="modelo asc">
                                    <label class="form-check-label" for="searchOrder1">Código</label>
                                </div>
                            </div>
                            <div class="py-1 col-12">
                                <label for="search" class="sr-only">Busca de Produtos</label>
                                <input autocomplete="off" class="form-control rounded-0" 
                                       value="{{query}}" type="text" name="query" id="search" data-service="{{CONTAINER}}lead/search/"
                                       data-url="{{CONTAINER}}/{{id}}/{{segmentoPOID}}" data-lead="{{id}}" data-page="{{page}}" data-segment="{{segmentoPOID}}" placeholder="Faça sua Busca dos Produtos">
                            </div>
                        </div>
                    </div>
                    <div class="leadResult w-100" id="leadResult"></div>
                </div>
            </div>

            <div class="w-100 my-3 border-top"></div>

            {{#Cliente.clienteDifal}}
            <div class="alert alert-danger" role="alert">
                <strong>Cliente com Difal!</strong> Difal, ou Diferencial de Alíquota do ICMS (Imposto Sobre Circulação de Mercadorias e Serviços), é um instrumento utilizado para equilibrar a arrecadação desse imposto entre os estados..
            </div>
            {{/Cliente.clienteDifal}}

            <div class="d-flex">
                <div class="w-100">
                    <div class="leadCart">
                        {{#bearings}}
                        {{> cart/bearings }}
                        {{/bearings}}

                        {{#auto}}
                        {{> cart/auto }}
                        {{/auto}}

                        {{#machines}}
                        {{> cart/machines }}
                        {{/machines}}

                        {{#faucets}}
                        {{> cart/faucets }}
                        {{/faucets}}

                        {{#parts}}
                        {{> cart/parts }}
                        {{/parts}}

                        {{#moto}}
                        {{> cart/moto }}
                        {{/moto}}

                        {{#geral}}
                        {{> cart/geral }}
                        {{/geral}}
                    </div>
                </div>
            </div>

            <div class="w-100 py-1"></div>
        </div>

        <div class="leadTotal">
            {{partials/total}}
        </div>

        {{> partials/modal}}

        {{/Lead}}

        {{> partials/footer}}
    </body>
</html>